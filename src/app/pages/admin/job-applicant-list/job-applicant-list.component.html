<div class="container">
  <div class="header">
    <button (click)="goBack()" class="back-button">
      <i class="fas fa-arrow-left"></i> Back
    </button>
    <h2>Job Applicants</h2>
  </div>

  <!-- Filters Section -->
  <div class="filters-section">
    <div class="search-box">
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        (keyup.enter)="onSearch()"
        placeholder="Search by name or email"
        class="search-input"
      >
      <button (click)="onSearch()" class="search-button">
        <i class="fas fa-search"></i>
      </button>
    </div>

    <div class="filter-controls">
      <select [(ngModel)]="selectedStatus" (change)="onStatusChange()" class="status-filter">
        <option value="">All Status</option>
        <option value="Pending">Pending</option>
        <option value="Shortlisted">Shortlisted</option>
        <option value="Rejected">Rejected</option>
        <option value="Hired">Hired</option>
      </select>

      <select [(ngModel)]="selectedDateRange" (change)="onDateRangeChange()" class="date-filter">
        <option value="">All Time</option>
        <option value="today">Today</option>
        <option value="week">This Week</option>
        <option value="month">This Month</option>
      </select>
    </div>
  </div>

  <!-- Applicants Table -->
  <div class="table-container">
    <table class="applicants-table">
      <thead>
        <tr>
          <th >
            Name 
          </th>
          <th >
            Email
          </th>
          <th >
            Applied Date
          </th>
          <th>Skills</th>
          <th>Experience</th>
          <th>Status</th>
         
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let applicant of applicants">
          <td>{{applicant.userData?.name || 'N/A'}}</td>
          <td>{{applicant.user?.email || 'N/A'}}</td>
          <td>{{applicant.applied_at | date:'medium'}}</td>
          <td>
            <div class="skills-container">
              <span class="skill-tag" *ngFor="let skill of applicant.userData?.skills">{{skill}}</span>
            </div>
          </td>
          <td>{{applicant.work_experiences || 'N/A'}}</td>
          <td>
            <span class="status-badge" [ngClass]="applicant.status?.toLowerCase()">
              {{applicant.status || "--"}}
            </span>
          </td>
         
        </tr>
        <tr *ngIf="applicants.length === 0">
          <td colspan="7" class="no-data">No applicants found</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination" *ngIf="totalItems > 0">
    <div class="items-per-page">
      <label>Items per page:</label>
      <select [(ngModel)]="itemsPerPage" (change)="onPerPageChange(itemsPerPage)">
        <option [value]="10">10</option>
        <option [value]="25">25</option>
        <option [value]="50">50</option>
      </select>
    </div>

    <div class="page-controls">
      <button 
        [disabled]="currentPage === 1"
        (click)="onPageChange(currentPage - 1)"
        class="page-button"
      >
        <i class="fas fa-chevron-left"></i>
      </button>
      
      <span class="page-info">
        Page {{currentPage}} of {{Math.ceil(totalItems / itemsPerPage)}}
        ({{totalItems}} total)
      </span>
      
      <button 
        [disabled]="currentPage >= Math.ceil(totalItems / itemsPerPage)"
        (click)="onPageChange(currentPage + 1)"
        class="page-button"
      >
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
</div>
