<div class="container">
  <div class="header">
    <button (click)="goBack()" class="back-button">
      <i class="fas fa-arrow-left"></i> Back
    </button>
    <h2>Job Applicants</h2>
  </div>

  <!-- Filters Section -->
  <div class="filters-section">
    <div class="search-box">
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        (keyup.enter)="onSearch()"
        placeholder="Search by name or email"
        class="search-input"
      >
      <button (click)="onSearch()" class="search-button">
        <i class="fas fa-search"></i>
      </button>
    </div>

    <div class="filter-controls">
      <button (click)="clear()" class="clear-btn">
        Clear
      </button>
    </div>
  </div>

  <!-- Applicants Table -->
  <div class="table-container">
    <div *ngIf="!applicants || applicants.length === 0" class="no-records-container">
      <div class="no-records">
        No records found
      </div>
    </div>

    <table *ngIf="applicants && applicants.length > 0" class="applicants-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Applied Date</th>
          <th>Experience</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let applicant of applicants">
          <td>{{applicant.user?.userProfile?.first_name}} {{applicant.user?.userProfile?.last_name}}</td>
          <td>{{applicant.user?.email}}</td>
          <td>{{applicant.applied_at | date:'mediumDate'}}</td>
          <td>{{applicant.user?.userProfile?.work_experiences || applicant.work_experiences || 'N/A'}}</td>
          <td>
            <span [ngClass]="{'status-badge': true, 'pending': applicant.status === 'Pending'}">
              {{applicant.status}}
            </span>
          </td>
          <td>
            <button class="view-btn" (click)="applicantDetails(applicant.id)">
              <i class="fas fa-eye"></i> View
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination" *ngIf="totalItems > 0">
    <div class="items-per-page">
      <label>Items per page:</label>
      <select [(ngModel)]="itemsPerPage" (change)="onPerPageChange(itemsPerPage)">
        <option [value]="10">10</option>
        <option [value]="25">25</option>
        <option [value]="50">50</option>
      </select>
    </div>

    <div class="page-controls">
      <button 
        [disabled]="currentPage === 1"
        (click)="onPageChange(currentPage - 1)"
        class="page-button"
      >
        <i class="fas fa-chevron-left"></i>
      </button>
      
      <span class="page-info">
        Page {{currentPage}} of {{Math.ceil(totalItems / itemsPerPage)}}
        ({{totalItems}} total)
      </span>
      
      <button 
        [disabled]="currentPage >= Math.ceil(totalItems / itemsPerPage)"
        (click)="onPageChange(currentPage + 1)"
        class="page-button"
      >
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
</div>
