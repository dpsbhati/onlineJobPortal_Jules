<div class="container" *ngIf="applicantDetails">
  <div class="header">
    <button (click)="goBack()" class="back-button">
      <i class="fas fa-arrow-left"></i> Back
    </button>
    <h2>Applicant Details</h2>
  </div>

  <!-- Application Status -->
  <div class="section status-section">
    <h3>Application Status</h3>
    <div class="status-controls">
      <div class="current-status">
        <label>Current Status:</label>
        <span class="status-badge" [ngClass]="applicantDetails.status?.toLowerCase()">
          {{applicantDetails.status}}
        </span>
      </div>
      <div class="status-change">
        <label>Change Status:</label>
        <select [(ngModel)]="selectedStatus" class="status-select">
          <option value="">Select Status</option>
          <option *ngFor="let status of statusOptions" [value]="status">{{status}}</option>
        </select>
      </div>
    </div>
    
    <!-- Admin Comments -->
    <!-- <div class="comments-section">
      <label>Admin Comments:</label>
      <textarea 
        [(ngModel)]="adminComments" 
        class="comments-input" 
        placeholder="Add your comments here..."
        rows="3"
      ></textarea>
    </div> -->
  </div>

  <!-- Personal Information -->
  <div class="section">
    <h3>Personal Information</h3>
    <div class="info-grid">
      <div class="info-item">
        <label>Name:</label>
        <span>{{applicantDetails.user?.userProfile?.first_name}} {{applicantDetails.user?.userProfile?.last_name}}</span>
      </div>
      <div class="info-item">
        <label>Email:</label>
        <span>{{applicantDetails.user?.email}}</span>
      </div>
      <div class="info-item">
        <label>Gender:</label>
        <span>{{applicantDetails.user?.userProfile?.gender}}</span>
      </div>
      <div class="info-item">
        <label>Date of Birth:</label>
        <span>{{applicantDetails.user?.userProfile?.dob | date}}</span>
      </div>
      <div class="info-item">
        <label>Mobile:</label>
        <span>{{applicantDetails.user?.userProfile?.mobile}}</span>
      </div>
    </div>
  </div>

  <!-- Professional Information -->
  <div class="section">
    <h3>Professional Details</h3>
    <div class="info-grid">
      <div class="info-item">
        <label>Current Company:</label>
        <span>{{applicantDetails.user?.userProfile?.current_company}}</span>
      </div>
      <div class="info-item">
        <label>Work Experience:</label>
        <span>{{applicantDetails.user?.userProfile?.work_experiences}}</span>
      </div>
      <div class="info-item">
        <label>Expected Salary:</label>
        <span>{{applicantDetails.user?.userProfile?.expected_salary}}</span>
      </div>
      <div class="info-item">
        <label>Key Skills:</label>
        <div class="skills-container">
          <span class="skill-tag" *ngFor="let skill of keySkills">
            {{skill}}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Certifications -->
  <div class="section" *ngIf="certifications.length > 0">
    <h3>Courses & Certifications</h3>
    <div class="certifications-list">
      <div class="certification-item" *ngFor="let cert of certifications">
        <h4>{{cert.organization_name}}</h4>
        <div class="cert-details">
          <p><strong>Description:</strong> {{cert.certification_description}}</p>
          <a *ngIf="cert.certification_file" [href]="cert.certification_file" target="_blank" class="cert-file-link">
            <i class="fas fa-file-pdf"></i> View Certificate
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Documents -->
  <div class="section">
    <h3>Documents</h3>
    <div class="documents-grid">
      <div class="document-item" *ngIf="applicantDetails.cv_path">
        <i class="fas fa-file-pdf"></i>
        <span>CV/Resume</span>
        <a [href]="applicantDetails.cv_path" target="_blank" class="btn btn-primary btn-sm">
          <i class="fas fa-download"></i> Download CV
        </a>
      </div>
      <!-- <div class="document-item" *ngIf="applicantDetails.certification_path">
        <i class="fas fa-certificate"></i>
        <span>Certification</span>
        <a [href]="applicantDetails.certification_path" target="_blank" class="btn btn-primary btn-sm">
          <i class="fas fa-download"></i> Download Certificate
        </a>
      </div> -->
    </div>
  </div>

  <!-- Additional Information -->
  <div class="section" *ngIf="applicantDetails.additional_info || applicantDetails.description">
    <h3>Additional Information</h3>
    <div class="info-grid">
      <div class="info-item full-width" *ngIf="applicantDetails.description">
        <label>Description:</label>
        <p>{{applicantDetails.description}}</p>
      </div>
      <div class="info-item full-width" *ngIf="applicantDetails.additional_info">
        <label>Additional Info:</label>
        <p>{{applicantDetails.additional_info}}</p>
      </div>
    </div>
  </div>

  <!-- Admin Comments -->
  <div class="section">
    <h3>Admin Comments</h3>
    <div class="comments-section">
      <textarea 
      [(ngModel)]="adminComments" 
      class="comments-input" 
      placeholder="Add your comments here..."
      rows="3"
    ></textarea>
      <button class="btn btn-primary" (click)="updateStatus()">
        Save 
      </button>
    </div>
  </div>
</div>

<ngx-spinner 
  bdColor="rgba(0, 0, 0, 0.8)" 
  size="medium" 
  color="#fff" 
  type="ball-clip-rotate" 
  [fullScreen]="true">
  <p style="color: white">Loading...</p>
</ngx-spinner>
