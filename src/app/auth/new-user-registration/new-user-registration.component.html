<button class="back-button" (click)="back()">Back</button>
<div class="registration-container">
  <h2>Register a New User</h2>
  <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()">
    <div>
      <label for="firstName">First Name</label>
      <input id="firstName"  class="form-control" formControlName="firstName" type="text" />
      <div
        *ngIf="
          registrationForm.get('firstName')?.touched &&
          registrationForm.get('firstName')?.invalid
        "
      >
        <small
          *ngIf="registrationForm.get('firstName')?.errors?.['required']"
          style="color: red"
          >First Name is required.</small
        >
        <small
          *ngIf="registrationForm.get('firstName')?.errors?.['minlength']"
          style="color: red"
          >First Name must be at least 3 characters.</small
        >
        <small
          *ngIf="registrationForm.get('firstName')?.errors?.['pattern']"
          style="color: red"
          >First Name must contain only alphabets.</small
        >
        <small
          *ngIf="registrationForm.get('firstName')?.errors?.['maxlength']"
          style="color: red"
          >Last Name cannot exceed 20 characters.</small
        >
      </div>
    </div>

    <div>
      <label for="lastName">Last Name</label>
      <input id="lastName"  class="form-control" formControlName="lastName" type="text" />
      <div
        *ngIf="
          registrationForm.get('lastName')?.touched &&
          registrationForm.get('lastName')?.invalid
        "
      >
        <small
          *ngIf="registrationForm.get('lastName')?.errors?.['required']"
          style="color: red"
          >Last Name is required.</small
        >
        <small
          *ngIf="registrationForm.get('lastName')?.errors?.['minlength']"
          style="color: red"
          >Last Name must be at least 3 characters.</small
        >
        <small
          *ngIf="registrationForm.get('lastName')?.errors?.['pattern']"
          style="color: red"
          >Last Name must contain only alphabets.</small
        >
        <small
          *ngIf="registrationForm.get('lastName')?.errors?.['maxlength']"
          style="color: red"
          >Last Name cannot exceed 20 characters.</small
        >
      </div>
    </div>

    <div>
      <label for="email">Email</label>
      <input id="email" class="form-control" formControlName="email" type="email" />
      <div
        *ngIf="
          registrationForm.get('email')?.touched &&
          registrationForm.get('email')?.invalid
        "
      >
        <small
          *ngIf="registrationForm.get('email')?.errors?.['required']"
          style="color: red"
          >Email is required.</small
        >
        <small
          *ngIf="registrationForm.get('email')?.errors?.['email'] || registrationForm.get('email')?.errors?.['pattern']"
          style="color: red"
          >Please enter a valid email address (e.g., user&#64;example.com)</small
        >
      </div>
    </div>

    <div>
      <label for="password">Password</label>
      <div class="password-container">
        <input
          [type]="showPassword ? 'text' : 'password'"
          id="password"
          class="form-control"
          formControlName="password"
        />
        <i
          [class]="showPassword ? 'fas fa-eye-slash eye-icon' : 'fas fa-eye eye-icon'"
          (click)="togglePasswordVisibility()"
        ></i>
      </div>
      <div
        *ngIf="
          registrationForm.get('password')?.touched &&
          registrationForm.get('password')?.invalid
        "
      >
        <small
          *ngIf="registrationForm.get('password')?.errors?.['required']"
          style="color: red"
          >Password is required.</small
        >
        <small
          *ngIf="registrationForm.get('password')?.errors?.['pattern']"
          style="color: red"
        >
          Password must contain:
          <ul>
            <li>At least 8 characters</li>
            <li>At least one uppercase letter (A-Z)</li>
            <li>At least one lowercase letter (a-z)</li>
            <li>At least one number (0-9)</li>
            <li>At least one special character </li>
          </ul>
        </small>
      </div>
    </div>

    <button type="submit" [disabled]="loading || registrationForm.invalid">
      Register
    </button>
  </form>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>
</div>
